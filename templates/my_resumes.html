{% extends "base.html" %}

{% block title %}My Resumes – Resumify{% endblock %}

{% block content %}
<section class="max-w-6xl mx-auto px-6 py-10">

  {% if resumes|length > 0 %}
  <!-- Header (only if resumes exist) -->
  <div class="flex items-center justify-between mb-10 border-b border-gray-700 pb-4">
    <div>
      <h2 class="text-3xl font-bold text-gray-100 tracking-tight">Your Resumes</h2>
      <p class="text-gray-400 text-sm mt-1">All your resumes in one place — edit, manage, or create new.</p>
    </div>
    <a href="{{ url_for('start') }}"
       class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2.5 rounded-xl shadow transition font-medium">
      + New Resume
    </a>
  </div>
  {% endif %}

  <!-- Resume Cards -->
  {% if resumes|length > 0 %}
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {% for resume in resumes %}
    <div class="bg-white/80 backdrop-blur border border-gray-200 rounded-2xl shadow-lg p-6 transition hover:shadow-xl hover:scale-[1.02] group">
      
      <!-- Clickable Area -->
      <a href="{{ url_for('view_resume', resume_id=resume.id) }}" class="block">
        <div class="flex items-center mb-4">
          <div class="w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 text-white flex items-center justify-center font-bold shadow">
            {{ resume.name[0]|upper }}
          </div>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-gray-900 group-hover:text-indigo-600 transition">{{ resume.name }}</h3>
            <p class="text-sm text-gray-500">{{ resume.profession }}</p>
            <p class="text-xs text-gray-400">Updated {{ resume.timestamp.strftime('%b %d, %Y') }}</p>
          </div>
        </div>

        <!-- Bio Preview -->
        <p class="text-gray-600 mb-4 line-clamp-2">{{ resume.bio or "No bio available." }}</p>
      </a>
      
      <!-- Action Buttons -->
      <div class="flex items-center gap-3 mt-4">
        <a href="{{ url_for('edit_resume', resume_id=resume.id) }}"
           class="flex-1 flex items-center justify-center bg-yellow-50 text-yellow-700 px-3 py-2 rounded-lg hover:bg-yellow-100 transition text-sm font-medium">
          Edit
        </a>
        <form action="{{ url_for('delete_resume', resume_id=resume.id) }}" method="POST" class="flex-1">
          <button type="submit"
                  class="w-full bg-red-50 text-red-700 px-3 py-2 rounded-lg hover:bg-red-100 transition text-sm font-medium"
                  onclick="return confirm('Are you sure you want to delete this resume?');">
            Delete
          </button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <!-- Empty State -->
  <div class="mt-20 flex flex-col items-center justify-center text-center">
    <div class="w-20 h-20 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-3xl shadow mb-4">
      +
    </div>
    <h3 class="text-lg font-semibold text-gray-200">No resumes yet</h3>
    <p class="text-gray-400 mt-1 text-sm">Start by creating your first resume to showcase your skills.</p>
    <a href="{{ url_for('start') }}"
       class="mt-6 inline-block bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2.5 rounded-xl shadow transition font-medium">
      Create Your First Resume
    </a>
  </div>
  {% endif %}
</section>
{% endblock %}
